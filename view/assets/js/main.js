import smoothScroll from"./smooth_scroll.js";const HEADER_OFFSET=80,app={init(){smoothScroll.init(),this.header(),this.tabs(),this.backToTop(),this.typed(),this.lightbox(),this.backToTop()},header(){const e=document.querySelector(".header"),t=document.querySelector(".header__mobile-toggle"),o=document.querySelector(".header__nav");if(!e||!t||!o)return;let i=0;window.addEventListener("scroll",()=>{const t=window.scrollY;e.classList.toggle("header-scrolled",t>0),e.classList.toggle("scroll-down",t>i&&t>0),e.classList.toggle("scroll-up",t<i&&t>0),i=t});const s=()=>{t.classList.toggle("open"),o.classList.toggle("open"),document.body.classList.toggle("no-scroll")};t.addEventListener("click",s),o.addEventListener("click",e=>{"A"===e.target.tagName&&s()})},tabs(){const e=document.querySelectorAll(".tab-btn"),t=document.querySelectorAll(".tab-panel"),o=document.querySelectorAll(".swiper");e.forEach((i,s)=>{i.addEventListener("click",()=>{e.forEach(e=>e.classList.remove("active")),t.forEach(e=>e.classList.remove("active")),i.classList.add("active"),t[s]&&t[s].classList.add("active"),setTimeout(()=>{o.forEach(e=>{e.swiper&&(e.swiper.update(),e.swiper.slideTo(0))})},50)})}),"undefined"!=typeof Swiper&&o.forEach(e=>{new Swiper(e,{loop:!0,autoplay:{delay:5e3,disableOnInteraction:!1},pagination:{el:e.querySelector(".swiper-pagination"),clickable:!0,dynamicBullets:!0},navigation:{nextEl:e.querySelector(".swiper-button-next"),prevEl:e.querySelector(".swiper-button-prev")},slidesPerView:1,spaceBetween:20,centeredSlides:!1,slideToClickedSlide:!1,grabCursor:!0,watchSlidesProgress:!0,breakpoints:{640:{slidesPerView:2,spaceBetween:20},1024:{slidesPerView:3,spaceBetween:30}},on:{init:function(){this.slides.forEach(e=>{e.style.cursor="pointer"})}}})})},backToTop(){const e=document.querySelector(".back-to-top");e&&(window.addEventListener("scroll",()=>e.classList.toggle("show",window.scrollY>300)),e.addEventListener("click",()=>window.scrollTo({top:0,behavior:"smooth"})))},typed(){const e=document.querySelector(".typing-text");e&&import("typed.js").then(({Typed:t})=>new t(e,{strings:["Developer","Designer","Freelancer","Photographer"],typeSpeed:100,backSpeed:60,loop:!0}))},backToTop(){const e=document.querySelector(".back-to-top");if(!e)return;const t=()=>{window.scrollY>300?e.classList.add("show"):e.classList.remove("show")};window.addEventListener("scroll",t),e.addEventListener("click",e=>{e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})}),t()},lightbox(){const e=document.getElementById("lightbox"),t=document.getElementById("lightbox-img"),o=document.getElementById("lightbox-caption"),i=document.querySelector(".lightbox-close"),s=document.querySelector(".lightbox-prev"),n=document.querySelector(".lightbox-next");if(!e||!t)return;const r=s=>{if(!s)return;const n=s.dataset.full||s.src||s.getAttribute("src"),r=s.alt||"Portfolio Image";if(t.src=n,t.alt=r,o){const e=s.closest(".portfolio-item, .swiper-slide");if(e){const t=e.querySelector("h3, .portfolio-content h3, .project-title");o.textContent=t?t.textContent:r}else o.textContent=r}document.body.style.overflow="hidden",e.classList.remove("hidden"),e.offsetWidth,e.classList.add("visible"),e.setAttribute("aria-hidden","false"),i&&i.focus(),l=s,c()};document.addEventListener("click",e=>{const t=e.target.closest(".portfolio-img img");if(t)return e.preventDefault(),e.stopPropagation(),void r(t);const o=e.target.closest(".swiper-slide:not(.swiper-slide-duplicate)");if(o&&!e.target.closest(".swiper-button-next, .swiper-button-prev, .swiper-pagination")){const t=o.querySelector("img");t&&(e.preventDefault(),e.stopPropagation(),r(t))}});let l=null;const c=()=>{if(!l)return;const e=Array.from(document.querySelectorAll(".swiper-slide:not(.swiper-slide-duplicate)")),t=e.findIndex(e=>e.contains(l));s&&(s.disabled=t<=0,s.style.opacity=t<=0?"0.5":"1"),n&&(n.disabled=t>=e.length-1,n.style.opacity=t>=e.length-1?"0.5":"1")};n&&n.addEventListener("click",e=>{e.stopPropagation(),(()=>{if(!l)return;const e=Array.from(document.querySelectorAll(".swiper-slide:not(.swiper-slide-duplicate)")),t=e.findIndex(e=>e.contains(l));if(t<e.length-1){const o=e[t+1].querySelector("img");o&&r(o)}})()}),s&&s.addEventListener("click",e=>{e.stopPropagation(),(()=>{if(!l)return;const e=Array.from(document.querySelectorAll(".swiper-slide:not(.swiper-slide-duplicate)")),t=e.findIndex(e=>e.contains(l));if(t>0){const o=e[t-1].querySelector("img");o&&r(o)}})()});const d=()=>{e.classList.remove("visible"),e.addEventListener("transitionend",function t(){e.removeEventListener("transitionend",t),e.classList.add("hidden")},{once:!0}),document.body.style.overflow="",e.setAttribute("aria-hidden","true")};i.addEventListener("click",d),e.addEventListener("click",t=>{t.target===e&&d()}),document.addEventListener("keydown",t=>{if(!e.classList.contains("hidden"))if("Escape"===t.key)d();else if("ArrowLeft"===t.key){const t=e.querySelector(".lightbox-prev");t&&t.click()}else if("ArrowRight"===t.key){const t=e.querySelector(".lightbox-next");t&&t.click()}})}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",app.init):app.init();